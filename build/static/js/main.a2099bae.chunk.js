(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(0),o=n.n(a),r=n(15),s=n.n(r),i=(n(55),n(56),n(47)),j=n(8),l=(n(57),n(7)),u=n(19),d=n.n(u),b=(n(42),n(43),n(1));var h=function(e){return Object(b.jsx)("div",{className:"score-board"+e.position,children:Object(b.jsxs)("div",{className:"score-item",children:[Object(b.jsx)("h1",{children:e.team}),Object(b.jsx)("h2",{children:e.score})]})})};var O=function(){var e=Object(a.useState)([null]),t=Object(l.a)(e,2),n=t[0],c=t[1];function o(){d.a.get("/scores").then((function(e){c([e.data])}))}return Object(a.useEffect)((function(){o(),setInterval((function(){o()}),5e3)}),[]),Object(b.jsx)("div",{className:"outer",children:Object(b.jsx)("div",{className:"middle",children:Object(b.jsx)("div",{className:"inner",children:Object(b.jsx)("div",{className:"d-flex flex-column justify-content-center w-100 h-100",children:Object(b.jsx)("div",{className:"d-flex flex-column justify-content-center align-items-center",children:null!==n[0]?n[0].sort((function(e,t){return e.position-t.position})).map((function(e){return Object(b.jsx)(h,{team:e.team,score:e.teamScore,position:e.position},e._id)})):null})})})})})};n(77),n(78);var f=function(){return Object(b.jsx)("header",{children:Object(b.jsx)("h1",{children:"ScoreBoard Admin"})})};n(79),n(80);var m=function(){return Object(b.jsx)("footer",{children:Object(b.jsx)("p",{children:"sandul jayathileka - github/cypherdec \xa9 2021"})})},x=n(32),p=n.n(x),v=n(45),S=(n(82),n(83),n(21)),g=n(46),C=n(17),w=n(26),y=n(20),N=n(22),k=n.n(N);var E=function(){var e=Object(N.useSession)(),t=e.authenticated,n=e.removeSession,o=Object(a.useState)({_id:"",team:"",teamScore:"",position:"",_v:""}),r=Object(l.a)(o,2),s=r[0],i=r[1],j=Object(a.useState)({_id:"",team:"",teamScore:"",position:"",_v:""}),u=Object(l.a)(j,2),h=u[0],O=u[1],x=Object(a.useState)({_id:"",team:"",teamScore:"",position:"",_v:""}),k=Object(l.a)(x,2),E=k[0],T=k[1],F=Object(a.useState)({_id:"",team:"",teamScore:"",position:"",_v:""}),I=Object(l.a)(F,2),L=I[0],B=I[1],D=Object(a.useState)(!1),P=Object(l.a)(D,2),R=P[0],q=P[1],A=Object(y.d)();function H(){return(H=Object(v.a)(p.a.mark((function e(c){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.preventDefault(),n({authenticated:t});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){d.a.get("/scores").then((function(e){i(e.data[0]),O(e.data[1]),T(e.data[2]),B(e.data[3])}))}),[]),Object(a.useEffect)((function(){var e=s.teamScore,t=h.teamScore,n=E.teamScore,a=L.teamScore,o=[e,t,n,a].slice().sort((function(e,t){return t-e}));i((function(t){return Object(c.a)(Object(c.a)({},t),{},{position:o.indexOf(e)+1})})),O((function(e){return Object(c.a)(Object(c.a)({},e),{},{position:o.indexOf(t)+1})})),T((function(e){return Object(c.a)(Object(c.a)({},e),{},{position:o.indexOf(n)+1})})),B((function(e){return Object(c.a)(Object(c.a)({},e),{},{position:o.indexOf(a)+1})}))}),[s.teamScore,h.teamScore,E.teamScore,L.teamScore]),Object(b.jsxs)(b.Fragment,{children:[" ",t?Object(b.jsxs)("div",{className:"background-div",children:[Object(b.jsx)(f,{}),Object(b.jsx)("div",{className:"btn-div",children:Object(b.jsx)(S.a,{className:"btnLogout",onClick:function(e){return H.apply(this,arguments)},children:"Logout"})}),Object(b.jsxs)("div",{className:"tablediv",children:[Object(b.jsxs)(C.a,{children:[Object(b.jsxs)(g.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Team"}),Object(b.jsx)("th",{children:"Score"}),Object(b.jsx)("th",{children:"Place"})]})}),Object(b.jsxs)("tbody",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:s.team}),Object(b.jsxs)("td",{children:[" ",Object(b.jsx)(C.a.Control,{type:"number",autoComplete:"off",onChange:function(e){i((function(t){return Object(c.a)(Object(c.a)({},t),{},{teamScore:e.target.value})})),console.log(s)},value:s.teamScore,name:"lvl1Score",placeholder:"Enter Score"}),"  "]}),Object(b.jsx)("td",{children:s.position})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:h.team}),Object(b.jsxs)("td",{children:[" ",Object(b.jsx)(C.a.Control,{type:"number",autoComplete:"off",onChange:function(e){O((function(t){return Object(c.a)(Object(c.a)({},t),{},{teamScore:e.target.value})}))},value:h.teamScore,name:"lvl2score",placeholder:"Enter Score"}),"  "]}),Object(b.jsx)("td",{children:h.position})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:E.team}),Object(b.jsxs)("td",{children:[" ",Object(b.jsx)(C.a.Control,{type:"number",autoComplete:"off",onChange:function(e){T((function(t){return Object(c.a)(Object(c.a)({},t),{},{teamScore:e.target.value})}))},value:E.teamScore,name:"lvl3score",placeholder:"Enter Score"}),"  "]}),Object(b.jsx)("td",{children:E.position})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:L.team}),Object(b.jsxs)("td",{children:[" ",Object(b.jsx)(C.a.Control,{type:"number",autoComplete:"off",onChange:function(e){B((function(t){return Object(c.a)(Object(c.a)({},t),{},{teamScore:e.target.value})}))},value:L.teamScore,name:"lvl4score",placeholder:"Enter Score"}),"  "]}),Object(b.jsx)("td",{children:L.position})]})]})]}),Object(b.jsx)(S.a,{className:"btnupdate",onClick:function(e){e.preventDefault();var t=[s,h,E,L];d.a.post("/update",{scoreData:t}).then((function(e){A.show(e.data)}))},children:"Update Scores"}),Object(b.jsx)(S.a,{className:"btnreset",onClick:function(e){e.preventDefault(),i((function(e){return Object(c.a)(Object(c.a)({},e),{},{teamScore:0})})),O((function(e){return Object(c.a)(Object(c.a)({},e),{},{teamScore:0})})),T((function(e){return Object(c.a)(Object(c.a)({},e),{},{teamScore:0})})),B((function(e){return Object(c.a)(Object(c.a)({},e),{},{teamScore:0})}))},children:"Reset Scores"}),Object(b.jsx)(S.a,{className:"btn-instructions",onClick:function(){return q(!0)},children:"Instructions"})]}),Object(b.jsxs)(w.a,{show:R,onHide:function(){return q(!1)},placement:"bottom",className:"offcanvas",bsPrefix:"h-auto",children:[Object(b.jsx)(w.a.Header,{closeButton:!0,className:"canvas-head",children:Object(b.jsx)(w.a.Title,{children:"Instructions"})}),Object(b.jsxs)(w.a.Body,{className:"canvas-div",children:[Object(b.jsx)("p",{children:"Change scores by clicking on the score you wish to change"}),Object(b.jsx)("p",{children:'Click on the green "Update Score" button to save changes and make them visible to the audience'}),Object(b.jsx)("p",{children:'Click the yellow "Reset Score" button to reset all scores to 0. **note this will not update the scores. This is expected behaviour to prevent accidental resets. In order to permanantly reset scores, click the reset button and then the update button'}),Object(b.jsx)("p",{children:"If you accidentally clicked reset, refreshing the page will restore the previous scores"})]})]})]}),Object(b.jsx)(m,{})]}):_," "]})};n(90),n(91);var _=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),r=Object(l.a)(o,2),s=r[0],i=r[1],j=Object(a.useState)(""),u=Object(l.a)(j,2),h=u[0],O=u[1],x=Object(a.useState)("hidden"),p=Object(l.a)(x,2),v=p[0],g=p[1],w=Object(N.useSession)(),k=w.authenticated,_=w.saveSession,T=Object(y.d)();function F(){return""!==s||""!==n||(T.show("fields cannot be blank"),!1)}return Object(a.useEffect)((function(){d.a.get("/login").then((function(e){g(e.data)}))}),[]),Object(b.jsx)(b.Fragment,{children:k?Object(b.jsx)(E,{}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f,{}),Object(b.jsx)("div",{className:"form-container",children:Object(b.jsx)("div",{className:"form-div",children:Object(b.jsxs)(C.a,{children:[Object(b.jsx)(C.a.Control,{type:"text",placeholder:"username",onChange:function(e){c(e.target.value)},value:n,autoComplete:"off",required:!0}),Object(b.jsx)(C.a.Control,{type:"password",placeholder:"password",onChange:function(e){i(e.target.value)},value:s,autoComplete:"off",required:!0}),Object(b.jsx)(C.a.Control,{type:v,placeholder:"confirm password",onChange:function(e){O(e.target.value)},value:h,autoComplete:"off"}),Object(b.jsx)(S.a,{className:"btnLogin",onClick:function(e){e.preventDefault(),"password"===v?(s===h&&F()||(T.show("passwords do not match"),0))&&d.a.post("/newlogin",{username:n,password:s}).then((function(e){"ok"===e.data?(_({user:n}),g("hidden"),c(""),i("")):T.show("error, try again")})):F()&&d.a.post("/login",{username:n,password:s}).then((function(e){"ok"===e.data?(_({user:n}),g("hidden"),c(""),i("")):T.show("error, incorrect credentials")}))},children:"Login"})]})})}),Object(b.jsx)(m,{})]})})};var T=function(){return Object(b.jsx)(i.a,{children:Object(b.jsxs)(k.a,{children:[Object(b.jsx)(j.a,{exact:!0,path:"/",component:O}),Object(b.jsx)(j.a,{exact:!0,path:"/admin",component:_})]})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,102)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),o(e),r(e)}))},I=n(50),L={position:y.b.BOTTOM_CENTER,timeout:5e3,offset:"30px",transition:y.c.SCALE};s.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(y.a,Object(c.a)(Object(c.a)({template:I.a},L),{},{children:Object(b.jsx)(T,{})}))}),document.getElementById("root")),F()}},[[98,1,2]]]);
//# sourceMappingURL=main.a2099bae.chunk.js.map